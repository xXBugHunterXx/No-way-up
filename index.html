<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Me and Dylan's Game</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
    <div id="game-container">
        <img id="player" src="my-phaser-game/assets/images/floor.jpg" alt="Player Image" />
    </div>


    <!-- put hell thingys here im gonna forget so look out for this note -->
    <div class="platform" style="left: 100px; top: 400px; width: 200px; height: 20px;"></div>
    <div class="platform" style="left: 400px; top: 300px; width: 150px; height: 20px;"></div>
    <div class="platform" style="left: 600px; top: 450px; width: 250px; height: 20px;"></div>

    <div id="menu">
        <img src="my-phaser-game/assets/images/No.png" height="300px" width="250px" />
        <img src="my-phaser-game/assets/images/Way.png" height="300px" width="250px" />
        <img src="my-phaser-game/assets/images/Up.png" height="300px" width="250px" />
        <div class="nav">
            <button id="start-btn">Start Game</button>
            <button id="instructions-btn">Instructions</button>
            <button id="exit-btn">Exit</button>
        </div>
    </div>

    <script>
        const player = document.getElementById("player");
        const menu = document.getElementById("menu");
    
        let x = 0;
        let y = 300;
        const movementDistance = 5;
        let gravity = 1;
        let velocityY = 0;
        const maxVelocityY = 10;
        const groundY = 500;
        let keys = {};
    
        let currentFrame = 0;
        const frameWidth = 64; // Width of a single frame
        const frameHeight = 64; // Height of a single frame
        const totalFrames = 8; // Total frames in the sprite sheet
        let animationCooldown = 0;
        let isMoving = false;
    
        // Function to update the animation frame
        function updateAnimation() {
            if (animationCooldown === 0) {
                currentFrame = (currentFrame + 1) % totalFrames;
                player.style.backgroundPosition = `-${currentFrame * frameWidth}px 0`;
                animationCooldown = 5; // Reset cooldown for smoother animation speed
            } else {
                animationCooldown--;
            }
        }
    
        function movePlayer() {
            // Movement
            if (keys['a']) { // Move Left
                x -= movementDistance;
                player.style.backgroundImage = "url('my-phaser-game/assets/images/KnightWalkLeft.png')";
                isMoving = true;
            } else if (keys['d']) { // Move Right
                x += movementDistance;
                player.style.backgroundImage = "url('my-phaser-game/assets/images/KnightWalkRight.png')";
                isMoving = true;
            } else {
                isMoving = false; // Reset movement
            }
    
            // Gravity, collision detection, etc.
            
            // Update position
            player.style.left = `${x}px`;
            player.style.top = `${y}px`;
    
            // Only animate if moving
            if (isMoving) {
                updateAnimation();
            } else {
                currentFrame = 0;
                player.style.backgroundPosition = "0 0"; // Reset to first frame
            }
    
            requestAnimationFrame(movePlayer);
        }
    
        window.onload = function () {
            menu.style.display = 'block';
        };
    
        document.getElementById("start-btn").onclick = function () {
            menu.style.display = 'none';
            requestAnimationFrame(movePlayer);
        };
    
        document.addEventListener("keydown", (event) => {
            keys[event.key] = true;
        });
    
        document.addEventListener("keyup", (event) => {
            keys[event.key] = false;
        });
    </script>
    
</body>

</html>